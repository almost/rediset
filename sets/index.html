<html><head><title> Sets / rediset</title><link rel="stylesheet" href="../_dmedia/bootstrap.css"/><link rel="stylesheet" href="../_dmedia/tango.css"/><link rel="stylesheet/less" type="text/css" href="../_dmedia/style.less"/><script src="../_dmedia/less.js" type="text/javascript">
        </script></head><body class="content">
        <div class="wrap">
            <header><h1><a href="..">rediset</a></h1></header><div class="markdown">
<h1 id="sets"><a href="">Sets</a></h1><p>The basic data structure Rediset operates on is the <em>set</em>. Here's an extract
from the Redis documentation on the
<a href="http://redis.io/topics/data-types">set data type</a>:</p>
<blockquote>
<p>Redis Sets are an unordered collection of Strings. It is possible to add,
remove, and test for existence of members in O(1) (constant time
regardless of the number of elements contained inside the Set).</p>
<p>Redis Sets have the desirable property of not allowing repeated members.
Adding the same element multiple times will result in a set having a single
copy of this element. Practically speaking this means that adding a member
does not require a check if exists then add operation.</p>
<p>A very interesting thing about Redis Sets is that they support a number of
server side commands to compute sets starting from existing sets, so you
can do unions, intersections, differences of sets in very short time.</p>
</blockquote>
<p>Sets are instantiated as follows:</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">from</span> <span class="n">rediset</span> <span class="nb">import</span> <span class="n">Rediset</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">Rediset</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">'somekey'</span><span class="p">)</span>
</pre></div>


<p>Note that you can't pass an initial iterable of items when instantiating a new
Set (like you can for native Python sets). This is because the set <em>might
already exist</em> in Redis. You are instantiating a <em>wrapper</em> around a Redis
set containing zero or more elements.</p>
<p>You can add and remove items from the set:</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span> <span class="s">'c'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s">'b'</span><span class="p">)</span>
</pre></div>


<p>You can get its size, check if an item is in the set, and get all of its
members by converting it to a native Python set (or by iterating over it):</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'a'</span> <span class="n">in</span> <span class="n">s</span>
<span class="n">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'b'</span> <span class="n">in</span> <span class="n">s</span>
<span class="n">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">set</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">set</span><span class="p">([</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'c'</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="n">in</span> <span class="n">s</span><span class="p">]</span>
<span class="p">[</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'c'</span><span class="p">]</span>
</pre></div>


<p>All of these operations are performed in Redis:</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">'b'</span><span class="p">)</span>     <span class="c1"># "SADD" "somekey" "b"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>         <span class="c1"># "SCARD" "somekey"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'a'</span> <span class="n">in</span> <span class="n">s</span>       <span class="c1"># "SISMEMBER" "somekey" "a"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">set</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>         <span class="c1"># "SMEMBERS" "somekey"</span>
</pre></div>
                </div>
            <footer><p><a href="http://github.com/j4mie/rediset"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://a248.e.akamai.net/assets.github.com/img/e6bef7a091f5f3138b8cd40bc3e114258dd68ddf/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub"/></a></p>
<p><a href="http://dabapps.com"><img src="http://dabapps.com/static/media/images/template/dabapps-logo.png" width="100" alt="DabApps logo" title="DabApps logo"/></a></p>
<p>Created by Jamie Matthews. <a href="http://twitter.com/j4mie">Follow me on Twitter</a>.</p></footer></div>
    </body></html>